<div class="svm-container">
    <header class="header">
      <h1>Support Vector Machines (SVM) Visualization</h1>
      <p class="subtitle">Interactive visualization of SVM core concepts</p>
    </header>
  
    <div class="tabs">
      <button class="tab-button" [class.active]="activeTab === 'tab1'" (click)="setActiveTab('tab1')">
        <span class="icon">üîç</span>
        Margin Maximization
      </button>
      <button class="tab-button" [class.active]="activeTab === 'tab2'" (click)="setActiveTab('tab2')">
        <span class="icon">üîÑ</span>
        Kernel Transformation
      </button>
      <button class="tab-button" [class.active]="activeTab === 'tab3'" (click)="setActiveTab('tab3')">
        <span class="icon">‚öñÔ∏è</span>
        C Parameter Effect
      </button>
    </div>
  
    <div class="content-container">
      <div class="controls">
        <div class="control-group">
          <button class="control-button play" [disabled]="isPlaying" (click)="playSimulation()">
            <span class="icon">‚ñ∂Ô∏è</span> Play
          </button>
          <button class="control-button stop" [disabled]="!isPlaying" (click)="stopSimulation()">
            <span class="icon">‚èπÔ∏è</span> Stop
          </button>
        </div>
  
        <div class="control-group">
          <label>Animation Speed:</label>
          <div class="speed-buttons">
            <button class="speed-button" (click)="setSpeed(2000)" [class.active]="animationSpeed === 2000">Slow</button>
            <button class="speed-button" (click)="setSpeed(1000)" [class.active]="animationSpeed === 1000">Medium</button>
            <button class="speed-button" (click)="setSpeed(500)" [class.active]="animationSpeed === 500">Fast</button>
          </div>
        </div>
  
        <!-- Tab-specific controls -->
        <div class="tab-controls" *ngIf="activeTab === 'tab2'">
          <div class="control-group">
            <label>Kernel Type:</label>
            <div class="kernel-buttons">
              <button class="kernel-button" (click)="setKernelType('linear')" [class.active]="kernelType === 'linear'">Linear</button>
              <button class="kernel-button" (click)="setKernelType('rbf')" [class.active]="kernelType === 'rbf'">RBF</button>
              <button class="kernel-button" (click)="setKernelType('poly')" [class.active]="kernelType === 'poly'">Polynomial</button>
            </div>
          </div>
  
          <div class="control-group" *ngIf="kernelType === 'rbf'">
            <label>Gamma Value: {{gammaValue}}</label>
            <input type="range" min="0.01" max="1" step="0.01" [value]="gammaValue" (input)="setGammaValue($any($event.target).value)">
          </div>
        </div>
  
        <div class="tab-controls" *ngIf="activeTab === 'tab3'">
          <div class="control-group">
            <label>Test C Value: {{cValue}}</label>
            <input type="range" min="0.1" max="100" step="0.1" [value]="cValue" (input)="setCValue($any($event.target).value)">
          </div>
        </div>
  
        <div class="progress-bar">
          <div class="progress" [style.width.%]="(currentStep / maxSteps) * 100"></div>
        </div>
      </div>
  
      <div class="visualization-container">
        <!-- Visualization tabs -->
        <div class="visualization" *ngIf="activeTab === 'tab1'">
          <div class="info-panel">
            <h2>Margin Maximization</h2>
            <p>SVM works by finding the hyperplane that maximizes the margin between classes. The margin is the distance between the hyperplane and the closest data points (support vectors).</p>
            <ul>
              <li><strong>Hyperplane</strong>: The decision boundary (green solid line)</li>
              <li><strong>Margin</strong>: The region between the dashed lines</li>
              <li><strong>Support Vectors</strong>: Points with yellow rings that lie on the margin boundaries</li>
            </ul>
            <p>A larger margin leads to better generalization for unseen data.</p>
          </div>
          <div class="canvas-wrapper">
            <div #marginCanvas class="canvas"></div>
          </div>
        </div>
  
        <div class="visualization" *ngIf="activeTab === 'tab2'">
          <div class="info-panel">
            <h2>Kernel Transformation</h2>
            <p>When data is not linearly separable, SVM uses the <strong>kernel trick</strong> to transform it into a higher-dimensional space where a linear boundary becomes possible.</p>
            <ul>
              <li><strong>Original Space</strong>: Data that can't be separated by a straight line</li>
              <li><strong>Transformed Space</strong>: Kernel-mapped data that can be separated linearly</li>
            </ul>
            <p>Common kernels:</p>
            <ul>
              <li><strong>Linear</strong>: No transformation (K(x,y) = x¬∑y)</li>
              <li><strong>RBF</strong>: Radial Basis Function (K(x,y) = exp(-Œ≥||x-y||¬≤))</li>
              <li><strong>Polynomial</strong>: Raises dot product to a power (K(x,y) = (x¬∑y + c)^d)</li>
            </ul>
          </div>
          <div class="canvas-wrapper">
            <div #kernelCanvas class="canvas"></div>
          </div>
        </div>
  
        <div class="visualization" *ngIf="activeTab === 'tab3'">
          <div class="info-panel">
            <h2>C Parameter Effect</h2>
            <p>The <strong>C parameter</strong> controls the trade-off between maximizing the margin and minimizing classification errors.</p>
            <ul>
              <li><strong>Small C</strong> (e.g., 0.1): Prioritizes wider margin, allows more misclassifications</li>
              <li><strong>Large C</strong> (e.g., 100): Prioritizes fewer errors, results in narrower margin</li>
            </ul>
            <p>Choosing the right C value helps balance between overfitting (high C) and underfitting (low C).</p>
          </div>
          <div class="canvas-wrapper">
            <div #cParamCanvas class="canvas"></div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Tooltip -->
    <div class="tooltip" *ngIf="showTooltip" [style.left.px]="tooltipX" [style.top.px]="tooltipY">
      {{tooltipText}}
    </div>
  </div>