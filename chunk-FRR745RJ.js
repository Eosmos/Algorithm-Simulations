import{b as Y,c as X,d as O,e as S,f as B,i as D,j as k,k as F,n as at,q as W,r as M,w as Q}from"./chunk-SKIYKJGI.js";import{k as et,p as nt}from"./chunk-4IAKKPMF.js";import{Da as U,Ia as K,Oa as R,Pa as J,Qa as $,X as E,Xa as x,Y as V,Ya as u,Za as w,ab as H,db as z,eb as L,fa as G,gb as T,hb as N,ib as I,kb as y,lb as j,mb as tt,ua as C,za as Z}from"./chunk-CS32D7W3.js";var ot=["simulationContainer"],rt=["scatterPlot"],st=["screePlot"],lt=["variancePlot"];function ct(A,i){if(A&1){let e=H();x(0,"div",32),z("click",function(){let a=E(e).index,s=L();return s.currentStep=a,s.updateStepDescription(),V(s.handleCurrentStep())}),x(1,"div",33),y(2),u(),x(3,"div",34),y(4),u()()}if(A&2){let e=i.$implicit,t=i.index,a=L();$("active",t===a.currentStep)("completed",t<a.currentStep),C(2),j(t+1),C(2),j(e)}}var it=class A{constructor(i){this.zone=i}simulationContainer;scatterPlotContainer;screePlotContainer;variancePlotContainer;width=500;height=350;margin={top:30,right:45,bottom:50,left:50};innerWidth=this.width-this.margin.left-this.margin.right;innerHeight=this.height-this.margin.top-this.margin.bottom;autoPlayInterval;isPlaying=!1;stepInterval=1500;currentStep=0;maxSteps=5;stepTitles=["Original Data","Standardization","Find Principal Components","Project Data onto PCs","Variance Explained","Reconstruction"];currentStepDescription="";numPoints=80;rawData=[];stdData=[];projectedData=[];reconstructedData=[];mean={x:0,y:0};stdDev={x:1,y:1};covarianceMatrix=[[1,0],[0,1]];eigenvalues=[1,1];eigenvectors=[[1,0],[0,1]];explainedVariance=[.5,.5];cumulativeVariance=[.5,1];ngOnInit(){this.generateCorrelatedData(),this.calculatePCA(),this.updateStepDescription()}ngAfterViewInit(){this.initializeVisualization(),setTimeout(()=>{this.simulationContainer&&this.simulationContainer.nativeElement&&(this.simulationContainer.nativeElement.scrollIntoView({behavior:"smooth",block:"start"}),window.scrollTo(0,0))},100)}generateCorrelatedData(){let a=.8*Math.sqrt(50),s=[50,50],l=[];for(let c=0;c<this.numPoints;c++){let p=this.boxMullerTransform(),d=this.boxMullerTransform(),m=s[0]+Math.sqrt(10)*p,h=s[1]+a/Math.sqrt(10)*p+Math.sqrt(5-a*a/10)*d;l.push({x:m,y:h})}this.rawData=l}boxMullerTransform(){let i=Math.random(),e=Math.random();return Math.sqrt(-2*Math.log(i))*Math.cos(2*Math.PI*e)}calculatePCA(){this.mean={x:B(this.rawData,g=>g.x)||0,y:B(this.rawData,g=>g.y)||0},this.stdDev={x:Y(this.rawData,g=>g.x)||1,y:Y(this.rawData,g=>g.y)||1},this.stdData=this.rawData.map(g=>({x:(g.x-this.mean.x)/this.stdDev.x,y:(g.y-this.mean.y)/this.stdDev.y}));let i=0,e=0,t=0;for(let g of this.stdData)i+=g.x*g.x,e+=g.x*g.y,t+=g.y*g.y;i/=this.stdData.length-1,e/=this.stdData.length-1,t/=this.stdData.length-1,this.covarianceMatrix=[[i,e],[e,t]];let a=this.covarianceMatrix[0][0],s=this.covarianceMatrix[0][1],l=this.covarianceMatrix[1][0],c=this.covarianceMatrix[1][1],p=a+c,d=a*c-s*l,m=p/2+Math.sqrt(p*p/4-d),h=p/2-Math.sqrt(p*p/4-d);this.eigenvalues=[m,h];let n,r,o,v;s!==0?(n=m-c,r=s,o=h-c,v=s):l!==0?(n=l,r=m-a,o=l,v=h-a):(n=1,r=0,o=0,v=1);let P=Math.sqrt(n*n+r*r),f=Math.sqrt(o*o+v*v);n/=P,r/=P,o/=f,v/=f,this.eigenvectors=[[n,r],[o,v]];let b=m+h;this.explainedVariance=[m/b,h/b],this.cumulativeVariance=[this.explainedVariance[0],this.explainedVariance[0]+this.explainedVariance[1]],this.projectedData=this.stdData.map(g=>{let _=this.eigenvectors[0][0]*g.x+this.eigenvectors[0][1]*g.y,q=this.eigenvectors[1][0]*g.x+this.eigenvectors[1][1]*g.y;return{pc1:_,pc2:q}}),this.reconstructedData=this.projectedData.map(g=>{let _=this.eigenvectors[0][0]*g.pc1+this.eigenvectors[1][0]*g.pc2,q=this.eigenvectors[0][1]*g.pc1+this.eigenvectors[1][1]*g.pc2;return{x:_*this.stdDev.x+this.mean.x,y:q*this.stdDev.y+this.mean.y}})}initializeVisualization(){this.zone.runOutsideAngular(()=>{this.drawScatterPlot(),this.drawScreePlot(),this.drawVariancePlot(),this.handleCurrentStep()})}drawScatterPlot(){let i=F(this.scatterPlotContainer.nativeElement);i.selectAll("*").remove();let e=i.append("svg").attr("width","100%").attr("height","100%").attr("viewBox",`0 0 ${this.width} ${this.height}`).attr("preserveAspectRatio","xMidYMid meet").attr("class","scatter-svg"),t=e.append("g").attr("transform",`translate(${this.margin.left},${this.margin.top})`),a=O(this.rawData,v=>v.x)||0,s=S(this.rawData,v=>v.x)||0,l=O(this.rawData,v=>v.y)||0,c=S(this.rawData,v=>v.y)||0,p=(a-s)*.1,d=(l-c)*.1,m=M().domain([s-p,a+p]).range([0,this.innerWidth]),h=M().domain([c-d,l+d]).range([this.innerHeight,0]),n=t.append("g").attr("class","x-axis").attr("transform",`translate(0,${this.innerHeight})`).call(D(m)).selectAll("text").style("fill","#e1e7f5"),r=t.append("g").attr("class","y-axis").call(k(h)).selectAll("text").style("fill","#e1e7f5");e.append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",this.width/2).attr("y",this.height-10).style("fill","#e1e7f5").text("Feature 1"),e.append("text").attr("class","y-label").attr("text-anchor","middle").attr("transform",`translate(15, ${this.height/2}) rotate(-90)`).style("fill","#e1e7f5").text("Feature 2"),e.append("text").attr("class","plot-title").attr("text-anchor","middle").attr("x",this.width/2).attr("y",20).style("fill","#ffffff").text("Data Visualization");let o=t.append("g").attr("class","scatter-legend").attr("transform",`translate(${this.innerWidth-100}, 20)`).style("opacity",0);o.append("rect").attr("width",100).attr("height",60).attr("rx",5).attr("ry",5).style("fill","#162a4a").style("stroke","#2a4980"),o.append("circle").attr("cx",20).attr("cy",20).attr("r",5).style("fill","#4285f4"),o.append("text").attr("x",35).attr("y",25).style("fill","#e1e7f5").text("Original"),o.append("circle").attr("cx",20).attr("cy",40).attr("r",5).style("fill","#ff6b6b"),o.append("text").attr("x",35).attr("y",45).style("fill","#e1e7f5").text("Reconstructed"),t.selectAll(".point").data(this.rawData).enter().append("circle").attr("class","point").attr("cx",v=>m(v.x)).attr("cy",v=>h(v.y)).attr("r",4).style("fill","#4285f4").style("opacity",.7),this.scatterPlotElements={svg:e,g:t,xScale:m,yScale:h,legend:o,xAxis:t.select(".x-axis"),yAxis:t.select(".y-axis")}}scatterPlotElements;drawScreePlot(){let i=F(this.screePlotContainer.nativeElement);i.selectAll("*").remove();let e=i.append("svg").attr("width","100%").attr("height","100%").attr("viewBox",`0 0 ${this.width} ${this.height}`).attr("preserveAspectRatio","xMidYMid meet").attr("class","scree-svg"),t=e.append("g").attr("transform",`translate(${this.margin.left},${this.margin.top})`),a=W().domain(["PC1","PC2"]).range([0,this.innerWidth]).padding(.3),s=M().domain([0,Math.max(...this.eigenvalues)*1.1]).range([this.innerHeight,0]);t.append("g").attr("class","x-axis").attr("transform",`translate(0,${this.innerHeight})`).call(D(a)).selectAll("text").style("fill","#e1e7f5"),t.append("g").attr("class","y-axis").call(k(s)).selectAll("text").style("fill","#e1e7f5"),e.append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",this.width/2).attr("y",this.height-10).style("fill","#e1e7f5").text("Principal Components"),e.append("text").attr("class","y-label").attr("text-anchor","middle").attr("transform",`translate(15, ${this.height/2}) rotate(-90)`).style("fill","#e1e7f5").text("Eigenvalue"),e.append("text").attr("class","plot-title").attr("text-anchor","middle").attr("x",this.width/2).attr("y",20).style("fill","#ffffff").text("Scree Plot"),this.screePlotElements={svg:e,g:t,xScale:a,yScale:s,data:[{name:"PC1",value:this.eigenvalues[0]},{name:"PC2",value:this.eigenvalues[1]}]}}screePlotElements;drawVariancePlot(){let i=F(this.variancePlotContainer.nativeElement);i.selectAll("*").remove();let e=i.append("svg").attr("width","100%").attr("height","100%").attr("viewBox",`0 0 ${this.width} ${this.height}`).attr("preserveAspectRatio","xMidYMid meet").attr("class","variance-svg"),t=e.append("g").attr("transform",`translate(${this.margin.left},${this.margin.top})`),a=W().domain(["PC1","PC2"]).range([0,this.innerWidth]).padding(.3),s=M().domain([0,1]).range([this.innerHeight,0]);t.append("g").attr("class","x-axis").attr("transform",`translate(0,${this.innerHeight})`).call(D(a)).selectAll("text").style("fill","#e1e7f5"),t.append("g").attr("class","y-axis").call(k(s).tickFormat(at(".0%"))).selectAll("text").style("fill","#e1e7f5"),e.append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",this.width/2).attr("y",this.height-10).style("fill","#e1e7f5").text("Principal Components"),e.append("text").attr("class","y-label").attr("text-anchor","middle").attr("transform",`translate(15, ${this.height/2}) rotate(-90)`).style("fill","#e1e7f5").text("Explained Variance"),e.append("text").attr("class","plot-title").attr("text-anchor","middle").attr("x",this.width/2).attr("y",20).style("fill","#ffffff").text("Explained Variance"),this.variancePlotElements={svg:e,g:t,xScale:a,yScale:s,data:[{name:"PC1",value:this.explainedVariance[0]},{name:"PC2",value:this.explainedVariance[1]}],cumulative:[{name:"PC1",value:this.cumulativeVariance[0]},{name:"PC2",value:this.cumulativeVariance[1]}]}}variancePlotElements;handleCurrentStep(){let{svg:i,g:e,xScale:t,yScale:a}=this.scatterPlotElements;switch(this.currentStep){case 0:this.drawOriginalData();break;case 1:this.animateStandardization();break;case 2:this.showPrincipalComponents();break;case 3:this.projectOntoComponents();break;case 4:this.showVarianceExplained();break;case 5:this.showReconstruction();break}}drawOriginalData(){let{svg:i,g:e,xScale:t,yScale:a}=this.scatterPlotElements;e.selectAll(".pc-line, .projection-line, .mean-point, .ellipse").remove(),e.selectAll(".point").data(this.rawData).transition().duration(500).attr("cx",s=>t(s.x)).attr("cy",s=>a(s.y)).style("fill","#4285f4"),i.select(".x-label").text("Feature 1"),i.select(".y-label").text("Feature 2"),i.select(".plot-title").text("Original Data")}animateStandardization(){let{svg:i,g:e,xScale:t,yScale:a,xAxis:s,yAxis:l}=this.scatterPlotElements;e.selectAll(".pc-line, .projection-line, .ellipse").remove(),e.append("circle").attr("class","mean-point").attr("cx",t(this.mean.x)).attr("cy",a(this.mean.y)).attr("r",6).style("fill","#ff9d45").style("stroke","#ffffff").style("stroke-width",2),e.append("text").attr("class","mean-label").attr("x",t(this.mean.x)+10).attr("y",a(this.mean.y)-10).style("fill","#e1e7f5").text("Mean"),setTimeout(()=>{let c=this.mean.x,p=this.mean.y;e.selectAll(".point").data(this.rawData).transition().duration(1e3).attr("cx",d=>t(d.x-c)).attr("cy",d=>a(d.y-p)),e.select(".mean-point").transition().duration(1e3).attr("cx",t(0)).attr("cy",a(0)),e.select(".mean-label").transition().duration(1e3).attr("x",t(0)+10).attr("y",a(0)-10),setTimeout(()=>{let d=this.rawData.map(o=>({x:o.x-c,y:o.y-p})),m=Math.max(Math.abs(S(d,o=>o.x)||0),Math.abs(O(d,o=>o.x)||0))/this.stdDev.x*1.5,h=Math.max(Math.abs(S(d,o=>o.y)||0),Math.abs(O(d,o=>o.y)||0))/this.stdDev.y*1.5,n=M().domain([-m,m]).range([0,this.innerWidth]),r=M().domain([-h,h]).range([this.innerHeight,0]);s.transition().duration(1e3).call(D(n)),l.transition().duration(1e3).call(k(r)),e.selectAll(".point").data(this.stdData).transition().duration(1e3).attr("cx",o=>n(o.x)).attr("cy",o=>r(o.y)),i.select(".x-label").text("Standardized Feature 1"),i.select(".y-label").text("Standardized Feature 2"),i.select(".plot-title").text("Standardized Data"),this.scatterPlotElements.xScale=n,this.scatterPlotElements.yScale=r},1200)},800)}showPrincipalComponents(){let{g:i,xScale:e,yScale:t,svg:a}=this.scatterPlotElements;a.select(".plot-title").text("Principal Components");let[s,l]=this.eigenvectors,[c,p]=this.eigenvalues,d=2,m=[s[0]*Math.sqrt(c)*d,s[1]*Math.sqrt(c)*d],h=[l[0]*Math.sqrt(p)*d,l[1]*Math.sqrt(p)*d];i.append("line").attr("class","pc-line pc1-line").attr("x1",e(-m[0])).attr("y1",t(-m[1])).attr("x2",e(m[0])).attr("y2",t(m[1])).style("stroke","#7c4dff").style("stroke-width",3).style("stroke-dasharray","5,0").style("opacity",0).transition().duration(800).style("opacity",1),i.append("text").attr("class","pc-label pc1-label").attr("x",e(m[0]*.7)).attr("y",t(m[1]*.7)-10).style("fill","#7c4dff").style("font-weight","bold").style("opacity",0).text("PC1").transition().duration(800).style("opacity",1),setTimeout(()=>{i.append("line").attr("class","pc-line pc2-line").attr("x1",e(-h[0])).attr("y1",t(-h[1])).attr("x2",e(h[0])).attr("y2",t(h[1])).style("stroke","#00c9ff").style("stroke-width",2).style("stroke-dasharray","5,0").style("opacity",0).transition().duration(800).style("opacity",1),i.append("text").attr("class","pc-label pc2-label").attr("x",e(h[0]*.7)).attr("y",t(h[1]*.7)-10).style("fill","#00c9ff").style("font-weight","bold").style("opacity",0).text("PC2").transition().duration(800).style("opacity",1),setTimeout(()=>{let n=this.generateEllipsePoints(0,0,Math.sqrt(c)*d,Math.sqrt(p)*d,Math.atan2(s[1],s[0])),r=Q().x(o=>e(o.x)).y(o=>t(o.y));i.append("path").attr("class","ellipse").attr("d",r(n)).style("stroke","#24b47e").style("stroke-width",2).style("fill","#24b47e").style("fill-opacity",.1).style("opacity",0).transition().duration(800).style("opacity",1)},800)},800)}generateEllipsePoints(i,e,t,a,s,l=50){let c=[],p=Math.cos(s),d=Math.sin(s);for(let m=0;m<l;m++){let h=m/l*2*Math.PI,n=Math.cos(h),r=Math.sin(h),o=t*n,v=a*r,P=i+o*p-v*d,f=e+o*d+v*p;c.push({x:P,y:f})}return c}projectOntoComponents(){let{g:i,xScale:e,yScale:t,svg:a}=this.scatterPlotElements;a.select(".plot-title").text("Projection onto Principal Components"),i.selectAll(".point").transition().duration(500).style("fill","#8bb4fa").style("opacity",.4);let[s,l]=this.eigenvectors;setTimeout(()=>{let p=Array.from({length:this.numPoints},(h,n)=>n).sort(()=>Math.random()-.5).slice(0,15),d=0,m=()=>{if(d>=p.length)return;let h=p[d],n=this.stdData[h],r=this.projectedData[h],o={x:r.pc1*s[0],y:r.pc1*s[1]};i.append("line").attr("class","projection-line").attr("x1",e(n.x)).attr("y1",t(n.y)).attr("x2",e(n.x)).attr("y2",t(n.y)).style("stroke","#ff6b6b").style("stroke-width",1.5).style("stroke-dasharray","3,3").transition().duration(500).attr("x2",e(o.x)).attr("y2",t(o.y)),i.append("circle").attr("class","projected-point").attr("cx",e(n.x)).attr("cy",t(n.y)).attr("r",4).style("fill","#7c4dff").style("opacity",0).transition().delay(500).duration(300).attr("cx",e(o.x)).attr("cy",t(o.y)).style("opacity",1),d++,setTimeout(m,100)};m(),setTimeout(()=>{i.selectAll(".projection-line, .projected-point").remove();let h=X(this.projectedData,b=>b.pc1),n=X(this.projectedData,b=>b.pc2),r=.5,o=[(h[0]||-1)-r,(h[1]||1)+r],v=[(n[0]||-1)-r,(n[1]||1)+r],P=M().domain(o).range([0,this.innerWidth]),f=M().domain(v).range([this.innerHeight,0]);i.select(".x-axis").transition().duration(1e3).call(D(P)),i.select(".y-axis").transition().duration(1e3).call(k(f)),a.select(".x-label").text("Principal Component 1"),a.select(".y-label").text("Principal Component 2"),i.selectAll(".point").transition().duration(500).style("opacity",0),i.selectAll(".pc-line, .pc-label, .ellipse").transition().duration(500).style("opacity",0),setTimeout(()=>{i.selectAll(".pc-point").data(this.projectedData).enter().append("circle").attr("class","pc-point").attr("cx",b=>P(0)).attr("cy",b=>f(0)).attr("r",4).style("fill","#7c4dff").style("opacity",0).transition().duration(1e3).attr("cx",b=>P(b.pc1)).attr("cy",b=>f(b.pc2)).style("opacity",.7),this.scatterPlotElements.pcXScale=P,this.scatterPlotElements.pcYScale=f},600)},15*100+1e3)},500)}showVarianceExplained(){let{svg:i}=this.scatterPlotElements;i.select(".plot-title").text("Variance Explained by Principal Components");let{g:e,xScale:t,yScale:a,data:s}=this.screePlotElements;e.selectAll(".scree-bar").data(s).enter().append("rect").attr("class","scree-bar").attr("x",l=>t(l.name)).attr("y",a(0)).attr("width",t.bandwidth()).attr("height",0).attr("fill",(l,c)=>c===0?"#7c4dff":"#00c9ff").transition().duration(1e3).attr("y",l=>a(l.value)).attr("height",l=>this.innerHeight-a(l.value)),e.selectAll(".scree-label").data(s).enter().append("text").attr("class","scree-label").attr("x",l=>t(l.name)+t.bandwidth()/2).attr("y",l=>a(l.value)-10).attr("text-anchor","middle").style("fill","#e1e7f5").style("font-size","12px").style("opacity",0).text(l=>l.value.toFixed(2)).transition().delay(1e3).duration(500).style("opacity",1),setTimeout(()=>{let{g:l,xScale:c,yScale:p,data:d,cumulative:m}=this.variancePlotElements;l.selectAll(".variance-bar").data(d).enter().append("rect").attr("class","variance-bar").attr("x",n=>c(n.name)).attr("y",p(0)).attr("width",c.bandwidth()).attr("height",0).attr("fill",(n,r)=>r===0?"#7c4dff":"#00c9ff").transition().duration(1e3).attr("y",n=>p(n.value)).attr("height",n=>this.innerHeight-p(n.value)),l.selectAll(".variance-label").data(d).enter().append("text").attr("class","variance-label").attr("x",n=>c(n.name)+c.bandwidth()/2).attr("y",n=>p(n.value)-10).attr("text-anchor","middle").style("fill","#e1e7f5").style("font-size","12px").style("opacity",0).text(n=>(n.value*100).toFixed(1)+"%").transition().delay(1e3).duration(500).style("opacity",1);let h=Q().x(n=>c(n.name)+c.bandwidth()/2).y(n=>p(n.value));setTimeout(()=>{l.append("path").datum(m).attr("class","cumulative-line").attr("d",h).style("fill","none").style("stroke","#24b47e").style("stroke-width",3).style("stroke-dasharray",r=>r.map(o=>o.value*this.innerHeight).join(",")).style("stroke-dashoffset",this.innerHeight).transition().duration(1e3).style("stroke-dashoffset",0),l.selectAll(".cumulative-point").data(m).enter().append("circle").attr("class","cumulative-point").attr("cx",r=>c(r.name)+c.bandwidth()/2).attr("cy",r=>p(r.value)).attr("r",5).style("fill","#24b47e").style("opacity",0).transition().delay((r,o)=>1e3+o*300).duration(300).style("opacity",1),l.selectAll(".cumulative-label").data(m).enter().append("text").attr("class","cumulative-label").attr("x",r=>c(r.name)+c.bandwidth()/2).attr("y",r=>p(r.value)-15).attr("text-anchor","middle").style("fill","#24b47e").style("opacity",0).text(r=>(r.value*100).toFixed(1)+"%").transition().delay((r,o)=>1e3+o*300).duration(300).style("opacity",1);let n=l.append("g").attr("class","legend").attr("transform",`translate(${this.innerWidth-150}, 20)`);n.append("rect").attr("x",0).attr("y",0).attr("width",150).attr("height",70).style("fill","#162a4a").style("stroke","#2a4980").style("opacity",0).transition().duration(500).style("opacity",1),n.append("rect").attr("x",10).attr("y",10).attr("width",15).attr("height",15).style("fill","#7c4dff").style("opacity",0).transition().delay(500).duration(300).style("opacity",1),n.append("text").attr("x",35).attr("y",22).style("fill","#e1e7f5").style("opacity",0).text("Individual").transition().delay(500).duration(300).style("opacity",1),n.append("circle").attr("cx",17.5).attr("cy",42.5).attr("r",7.5).style("fill","#24b47e").style("opacity",0).transition().delay(800).duration(300).style("opacity",1),n.append("text").attr("x",35).attr("y",47).style("fill","#e1e7f5").style("opacity",0).text("Cumulative").transition().delay(800).duration(300).style("opacity",1)},1500)},1e3)}showReconstruction(){let{svg:i,g:e,xScale:t,yScale:a,legend:s}=this.scatterPlotElements;e.selectAll("*").remove();let l=O(this.rawData,f=>f.x)||0,c=S(this.rawData,f=>f.x)||0,p=O(this.rawData,f=>f.y)||0,d=S(this.rawData,f=>f.y)||0,m=(l-c)*.1,h=(p-d)*.1,n=M().domain([c-m,l+m]).range([0,this.innerWidth]),r=M().domain([d-h,p+h]).range([this.innerHeight,0]),o=e.append("g").attr("class","x-axis").attr("transform",`translate(0,${this.innerHeight})`).call(D(n)).selectAll("text").style("fill","#e1e7f5"),v=e.append("g").attr("class","y-axis").call(k(r)).selectAll("text").style("fill","#e1e7f5");i.select(".x-label").text("Feature 1"),i.select(".y-label").text("Feature 2"),i.select(".plot-title").text("Original vs. Reconstructed Data"),e.selectAll(".original-point").data(this.rawData).enter().append("circle").attr("class","original-point").attr("cx",f=>n(f.x)).attr("cy",f=>r(f.y)).attr("r",4).style("fill","#4285f4").style("opacity",.7);let P=e.append("g").attr("class","legend").attr("transform",`translate(${this.innerWidth-150}, 20)`);P.append("rect").attr("x",0).attr("y",0).attr("width",150).attr("height",70).style("fill","#162a4a").style("stroke","#2a4980"),P.append("circle").attr("cx",17.5).attr("cy",17.5).attr("r",4).style("fill","#4285f4"),P.append("text").attr("x",35).attr("y",22).style("fill","#e1e7f5").text("Original"),P.append("circle").attr("cx",17.5).attr("cy",47.5).attr("r",4).style("fill","#ff6b6b").style("opacity",0),P.append("text").attr("x",35).attr("y",52).style("fill","#e1e7f5").style("opacity",0).text("Reconstructed"),setTimeout(()=>{s.select("circle:nth-of-type(2)").transition().duration(500).style("opacity",1),s.select("text:nth-of-type(2)").transition().duration(500).style("opacity",1);let f=0,b=()=>{if(f>=this.rawData.length)return;let g=this.rawData[f],_=this.reconstructedData[f];e.append("circle").attr("class","reconstructed-point").attr("cx",n(_.x)).attr("cy",r(_.y)).attr("r",0).style("fill","#ff6b6b").transition().duration(300).attr("r",4).style("opacity",.7),e.append("line").attr("class","reconstruction-line").attr("x1",n(g.x)).attr("y1",r(g.y)).attr("x2",n(g.x)).attr("y2",r(g.y)).style("stroke","#8a9ab0").style("stroke-width",1).style("stroke-dasharray","3,3").transition().duration(300).attr("x2",n(_.x)).attr("y2",r(_.y)),f+=5,setTimeout(b,50)};b()},1e3),this.scatterPlotElements.xScale=n,this.scatterPlotElements.yScale=r}nextStep(){this.stopAutoPlay(),this.currentStep<this.maxSteps&&(this.currentStep++,this.updateStepDescription(),this.handleCurrentStep())}prevStep(){this.stopAutoPlay(),this.currentStep>0&&(this.currentStep--,this.updateStepDescription(),this.handleCurrentStep())}toggleAutoPlay(){this.isPlaying?this.stopAutoPlay():this.startAutoPlay()}startAutoPlay(){this.isPlaying=!0,this.autoPlayInterval=setInterval(()=>{this.zone.run(()=>{this.currentStep<this.maxSteps?(this.currentStep++,this.updateStepDescription(),this.handleCurrentStep()):this.stopAutoPlay()})},this.stepInterval)}stopAutoPlay(){this.autoPlayInterval&&(clearInterval(this.autoPlayInterval),this.autoPlayInterval=null),this.isPlaying=!1}updateStepDescription(){let i=["This is the original dataset in its raw form. The data points show a pattern with correlation between the two features. PCA will help us identify the main directions of variation.","Before applying PCA, we standardize the data by subtracting the mean and dividing by the standard deviation. This ensures that features with larger scales don't dominate the analysis.","PCA finds the directions (Principal Components) where the data varies the most. PC1 captures the maximum variance, while PC2 is orthogonal to PC1 and captures the second most variance. These directions are the eigenvectors of the covariance matrix.","We can project our data onto the principal components, creating a new coordinate system. This transforms our data from the original feature space to the principal component space.","The eigenvalues tell us how much variance each principal component explains. The scree plot shows the eigenvalues, while the variance plot shows the proportion of total variance explained by each component, both individually and cumulatively.","We can reconstruct the original data using only the principal components we selected. This demonstrates how PCA can compress data while preserving important patterns. The difference between original and reconstructed points shows information loss."];this.currentStepDescription=i[this.currentStep]}static \u0275fac=function(e){return new(e||A)(Z(G))};static \u0275cmp=U({type:A,selectors:[["app-pca-simulation"]],viewQuery:function(e,t){if(e&1&&(T(ot,5),T(rt,5),T(st,5),T(lt,5)),e&2){let a;N(a=I())&&(t.simulationContainer=a.first),N(a=I())&&(t.scatterPlotContainer=a.first),N(a=I())&&(t.screePlotContainer=a.first),N(a=I())&&(t.variancePlotContainer=a.first)}},decls:82,vars:14,consts:[["simulationContainer",""],["scatterPlot",""],["screePlot",""],["variancePlot",""],["id","pca-simulation-container",1,"pca-simulation-container"],[1,"simulation-header"],[1,"title"],[1,"subtitle"],[1,"step-navigation"],[1,"step-controls"],[1,"nav-button",3,"click","disabled"],[1,"fas","fa-chevron-left"],[1,"nav-button","play-button",3,"click"],[1,"fas"],[1,"fas","fa-chevron-right"],[1,"step-progress"],[1,"step-dots"],["class","step-dot",3,"active","completed","click",4,"ngFor","ngForOf"],[1,"step-progress-bar"],[1,"progress-fill"],[1,"step-description"],[1,"step-title"],[1,"visualization-container"],[1,"main-plot"],[1,"side-plots"],[1,"plot","scree-plot"],[1,"plot","variance-plot"],[1,"explanation-panel"],[1,"explanation-section"],[1,"key-concept"],[1,"concept-name"],[1,"concept-description"],[1,"step-dot",3,"click"],[1,"dot-number"],[1,"dot-label"]],template:function(e,t){if(e&1){let a=H();x(0,"div",4,0)(2,"div",5)(3,"h1",6),y(4,"Principal Component Analysis (PCA) Simulation"),u(),x(5,"p",7),y(6,"An interactive visualization of dimensionality reduction"),u()(),x(7,"div",8)(8,"div",9)(9,"button",10),z("click",function(){return E(a),V(t.prevStep())}),w(10,"i",11),y(11," Previous "),u(),x(12,"button",12),z("click",function(){return E(a),V(t.toggleAutoPlay())}),w(13,"i",13),y(14),u(),x(15,"button",10),z("click",function(){return E(a),V(t.nextStep())}),y(16," Next "),w(17,"i",14),u()(),x(18,"div",15)(19,"div",16),K(20,ct,5,6,"div",17),u(),x(21,"div",18),w(22,"div",19),u()()(),x(23,"div",20)(24,"div",21),y(25),u(),x(26,"p"),y(27),u()(),x(28,"div",22),w(29,"div",23,1),x(31,"div",24),w(32,"div",25,2)(34,"div",26,3),u()(),x(36,"div",27)(37,"div",28)(38,"h3"),y(39,"What is PCA?"),u(),x(40,"p"),y(41,"Principal Component Analysis (PCA) is an "),x(42,"strong"),y(43,"unsupervised learning"),u(),y(44," technique used for dimensionality reduction. It identifies new variables (principal components) that capture the directions of maximum variance in the data."),u()(),x(45,"div",28)(46,"h3"),y(47,"Why use PCA?"),u(),x(48,"ul")(49,"li"),y(50,"Reduce dimensionality while preserving information"),u(),x(51,"li"),y(52,"Visualize high-dimensional data"),u(),x(53,"li"),y(54,"Identify important patterns/directions"),u(),x(55,"li"),y(56,"Remove noise by discarding low-variance components"),u(),x(57,"li"),y(58,"Create uncorrelated features"),u()()(),x(59,"div",28)(60,"h3"),y(61,"Key Concepts"),u(),x(62,"div",29)(63,"div",30),y(64,"Principal Components"),u(),x(65,"div",31),y(66,"New axes that capture maximum variance, ordered by importance"),u()(),x(67,"div",29)(68,"div",30),y(69,"Eigenvalues"),u(),x(70,"div",31),y(71,"Measure the amount of variance captured by each principal component"),u()(),x(72,"div",29)(73,"div",30),y(74,"Eigenvectors"),u(),x(75,"div",31),y(76,"Directions of the principal components in the original feature space"),u()(),x(77,"div",29)(78,"div",30),y(79,"Explained Variance"),u(),x(80,"div",31),y(81,"Proportion of total variance captured by each principal component"),u()()()()()}e&2&&(C(9),R("disabled",t.currentStep===0),C(4),$("fa-pause",t.isPlaying)("fa-play",!t.isPlaying),C(),tt(" ",t.isPlaying?"Pause":"Play"," "),C(),R("disabled",t.currentStep===t.maxSteps),C(5),R("ngForOf",t.stepTitles),C(2),J("width",t.currentStep/t.maxSteps*100,"%"),C(3),j(t.stepTitles[t.currentStep]),C(2),j(t.currentStepDescription),C(4),$("visible",t.currentStep>=4))},dependencies:[nt,et],styles:['.pca-simulation-container[_ngcontent-%COMP%]{font-family:Inter,Roboto,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;font-size:14px;color:#e1e7f5;background-color:#0c1428;min-height:100vh;padding:24px;overflow-x:hidden;width:100%;max-width:1200px;margin:0 auto;display:flex;flex-direction:column;align-items:center}.simulation-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;width:100%}.simulation-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#fff;margin-bottom:8px;background:linear-gradient(135deg,#4285f4,#7c4dff);-webkit-background-clip:text;-webkit-text-fill-color:transparent}@media (max-width: 768px){.simulation-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:24px}}.simulation-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:16px;color:#8a9ab0;margin:0}.step-navigation[_ngcontent-%COMP%]{margin-bottom:24px;width:100%}.step-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:16px}.step-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{background-color:#1e3a66;color:#e1e7f5;border:none;border-radius:8px;padding:8px 16px;margin:0 8px;font-size:14px;font-weight:600;cursor:pointer;transition:background-color .15s ease;display:flex;align-items:center;gap:8px}.step-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2a4980}.step-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.step-controls[_ngcontent-%COMP%]   .nav-button.play-button[_ngcontent-%COMP%]{background-color:#7c4dff}.step-controls[_ngcontent-%COMP%]   .nav-button.play-button[_ngcontent-%COMP%]:hover{background-color:#5c35cc}.step-progress[_ngcontent-%COMP%]{margin-top:16px}.step-progress[_ngcontent-%COMP%]   .step-dots[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:12px;position:relative}.step-progress[_ngcontent-%COMP%]   .step-dots[_ngcontent-%COMP%]:before{content:"";position:absolute;top:16px;left:0;right:0;height:2px;background-color:#1e3a66;z-index:0}.step-progress[_ngcontent-%COMP%]   .step-dot[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative;z-index:1;cursor:pointer}.step-progress[_ngcontent-%COMP%]   .step-dot[_ngcontent-%COMP%]   .dot-number[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background-color:#1e3a66;display:flex;align-items:center;justify-content:center;font-weight:600;margin-bottom:8px;transition:background-color .3s ease}.step-progress[_ngcontent-%COMP%]   .step-dot[_ngcontent-%COMP%]   .dot-label[_ngcontent-%COMP%]{font-size:12px;color:#8a9ab0;text-align:center;max-width:80px;transition:color .3s ease}.step-progress[_ngcontent-%COMP%]   .step-dot.active[_ngcontent-%COMP%]   .dot-number[_ngcontent-%COMP%]{background-color:#4285f4;box-shadow:0 0 0 4px #4285f433}.step-progress[_ngcontent-%COMP%]   .step-dot.active[_ngcontent-%COMP%]   .dot-label[_ngcontent-%COMP%]{color:#e1e7f5;font-weight:600}.step-progress[_ngcontent-%COMP%]   .step-dot.completed[_ngcontent-%COMP%]   .dot-number[_ngcontent-%COMP%]{background-color:#24b47e}.step-progress[_ngcontent-%COMP%]   .step-progress-bar[_ngcontent-%COMP%]{height:6px;background-color:#1e3a66;border-radius:12px;margin-top:16px;overflow:hidden}.step-progress[_ngcontent-%COMP%]   .step-progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(135deg,#4285f4,#7c4dff);border-radius:12px;transition:width .3s ease}.step-description[_ngcontent-%COMP%]{background-color:#162a4a;border-radius:12px;padding:16px;margin-bottom:24px;box-shadow:0 4px 8px #0000001f;width:100%}.step-description[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#fff;margin-bottom:12px}.step-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;line-height:1.6}.visualization-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px;margin-bottom:32px;width:100%;justify-content:center;align-items:flex-start}.visualization-container[_ngcontent-%COMP%]   .main-plot[_ngcontent-%COMP%]{flex:1;min-width:300px;max-width:600px;height:380px;background-color:#162a4a;border-radius:12px;padding:16px;box-shadow:0 4px 8px #0000001f;overflow:hidden;margin-bottom:16px}.visualization-container[_ngcontent-%COMP%]   .main-plot[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{overflow:visible;max-width:100%;max-height:100%}.visualization-container[_ngcontent-%COMP%]   .side-plots[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:320px;opacity:0;transform:translate(40px);transition:opacity .5s ease,transform .5s ease}.visualization-container[_ngcontent-%COMP%]   .side-plots.visible[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.visualization-container[_ngcontent-%COMP%]   .side-plots[_ngcontent-%COMP%]   .plot[_ngcontent-%COMP%]{flex:1;height:180px;background-color:#162a4a;border-radius:12px;padding:12px;box-shadow:0 4px 8px #0000001f;overflow:hidden}.visualization-container[_ngcontent-%COMP%]   .side-plots[_ngcontent-%COMP%]   .plot[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{max-width:100%;max-height:100%}[_nghost-%COMP%]     .axis-label{fill:#e1e7f5;font-size:12px}[_nghost-%COMP%]     .plot-title{fill:#fff;font-size:16px;font-weight:600}[_nghost-%COMP%]     .x-axis .domain, [_nghost-%COMP%]     .x-axis .tick line, [_nghost-%COMP%]     .y-axis .domain, [_nghost-%COMP%]     .y-axis .tick line{stroke:#1e3a66}[_nghost-%COMP%]     .x-axis .tick text, [_nghost-%COMP%]     .y-axis .tick text{fill:#e1e7f5!important;font-size:11px}[_nghost-%COMP%]     .point{transition:fill .3s ease,opacity .3s ease}[_nghost-%COMP%]     .projected-point, [_nghost-%COMP%]     .pc-point, [_nghost-%COMP%]     .reconstructed-point{transition:cx .3s ease,cy .3s ease,r .3s ease,opacity .3s ease}[_nghost-%COMP%]     .pc-line{transition:opacity .3s ease}[_nghost-%COMP%]     .ellipse{transition:opacity .3s ease,d .5s ease}[_nghost-%COMP%]     .x-label, [_nghost-%COMP%]     .y-label, [_nghost-%COMP%]     .plot-title, [_nghost-%COMP%]     .scree-label, [_nghost-%COMP%]     .variance-label, [_nghost-%COMP%]     .cumulative-label{font-family:Inter,Roboto,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;fill:#e1e7f5!important}[_nghost-%COMP%]     .scree-bar, [_nghost-%COMP%]     .variance-bar{shape-rendering:crispEdges}[_nghost-%COMP%]     text{fill:#e1e7f5}.explanation-panel[_ngcontent-%COMP%]{background-color:#162a4a;border-radius:12px;padding:24px;margin-top:32px;display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:32px;box-shadow:0 8px 16px #00000026;width:100%}.explanation-panel[_ngcontent-%COMP%]   .explanation-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:16px;margin-top:0;margin-bottom:12px;border-bottom:2px solid #4285f4;padding-bottom:8px;display:inline-block}.explanation-panel[_ngcontent-%COMP%]   .explanation-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0;line-height:1.6}.explanation-panel[_ngcontent-%COMP%]   .explanation-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:24px;margin-top:8px}.explanation-panel[_ngcontent-%COMP%]   .explanation-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;position:relative}.explanation-panel[_ngcontent-%COMP%]   .explanation-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]::marker{color:#4285f4}.explanation-panel[_ngcontent-%COMP%]   .explanation-section[_ngcontent-%COMP%]   .key-concept[_ngcontent-%COMP%]{margin-bottom:12px;padding:12px;border-radius:8px;background-color:#1e3a66;transition:transform .15s ease}.explanation-panel[_ngcontent-%COMP%]   .explanation-section[_ngcontent-%COMP%]   .key-concept[_ngcontent-%COMP%]:hover{transform:translate(4px)}.explanation-panel[_ngcontent-%COMP%]   .explanation-section[_ngcontent-%COMP%]   .key-concept[_ngcontent-%COMP%]   .concept-name[_ngcontent-%COMP%]{color:#6edfff;font-weight:600;margin-bottom:4px}.explanation-panel[_ngcontent-%COMP%]   .explanation-section[_ngcontent-%COMP%]   .key-concept[_ngcontent-%COMP%]   .concept-description[_ngcontent-%COMP%]{font-size:12px;color:#8a9ab0}@media (max-width: 1024px){.visualization-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.visualization-container[_ngcontent-%COMP%]   .main-plot[_ngcontent-%COMP%]{width:100%;max-width:500px;height:350px;margin-bottom:24px}.visualization-container[_ngcontent-%COMP%]   .side-plots[_ngcontent-%COMP%]{width:100%;max-width:500px;flex-direction:row}.visualization-container[_ngcontent-%COMP%]   .side-plots[_ngcontent-%COMP%]   .plot[_ngcontent-%COMP%]{height:200px}.explanation-panel[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.step-dot[_ngcontent-%COMP%]   .dot-label[_ngcontent-%COMP%]{display:none}.step-controls[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.step-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{margin-bottom:8px}.visualization-container[_ngcontent-%COMP%]   .main-plot[_ngcontent-%COMP%]{height:300px}.visualization-container[_ngcontent-%COMP%]   .side-plots[_ngcontent-%COMP%]{flex-direction:column}.visualization-container[_ngcontent-%COMP%]   .side-plots[_ngcontent-%COMP%]   .plot[_ngcontent-%COMP%]{height:180px}.simulation-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:20px}}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #4285f4b3}70%{box-shadow:0 0 0 10px #4285f400}to{box-shadow:0 0 #4285f400}}.active[_ngcontent-%COMP%]   .dot-number[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}']})};export{it as PcaSimulationComponent};
