import{a as gt}from"./chunk-ZW3SWSXV.js";import{A as ct,L as N,N as q,R as dt,S as ht,V as j,X as pt,Z as mt,k as it,o as at,p as ot,q as F,t as st,v as rt,z as lt}from"./chunk-IMA2JTAA.js";import{B as nt,d as X,i as B,j as Y,k as _,n as tt,r as R,w as et}from"./chunk-SKIYKJGI.js";import{k as Q,l as Z,p as J}from"./chunk-4IAKKPMF.js";import{Da as G,Ia as y,Oa as O,Pa as K,Qa as P,X as v,Xa as o,Y as M,Ya as s,Za as I,a as T,ab as U,db as w,eb as W,gb as A,hb as L,ib as V,jb as H,kb as a,lb as z,mb as E,nb as $,ua as m}from"./chunk-CS32D7W3.js";var xt=["visualizationContainer"],bt=["elbowChart"],Ct=["canvas3d"];function vt(C,t){C&1&&(o(0,"div",51)(1,"p"),a(2,"Click and drag to rotate | Scroll to zoom | Shift+drag to pan"),s()())}function Mt(C,t){if(C&1&&(o(0,"option",52),a(1),s()),C&2){let n=t.$implicit,e=t.index,i=W();O("value",e)("selected",e===i.selectedDatasetIndex),m(),E(" ",n.name," ")}}function wt(C,t){C&1&&(o(0,"div",57),I(1,"div",58),o(2,"p"),a(3,"Calculating elbow data..."),s()())}function Ot(C,t){if(C&1&&(o(0,"div",53),I(1,"div",54,5),o(3,"div",55)(4,"h3"),a(5,"The Elbow Method"),s(),o(6,"p"),a(7,'The Elbow Method helps determine the optimal number of clusters (k) by plotting the Within-Cluster Sum of Squares (WCSS) against different values of k. The "elbow point" where the rate of decrease sharply changes suggests a good value for k.'),s(),y(8,wt,4,0,"div",56),s()()),C&2){let n=W();m(8),O("ngIf",n.elbowData.length===0)}}function St(C,t){C&1&&(o(0,"div",59)(1,"div",60)(2,"h3"),a(3,"Purpose"),s(),o(4,"p"),a(5,"K-means is an "),o(6,"strong"),a(7,"unsupervised learning"),s(),a(8," algorithm used for "),o(9,"strong"),a(10,"partitioning"),s(),a(11," a dataset into a pre-determined number (k) of distinct, non-overlapping clusters. It groups similar data points together based on their features, minimizing the variation "),o(12,"em"),a(13,"within"),s(),a(14," each cluster."),s()(),o(15,"div",60)(16,"h3"),a(17,"Core Concept"),s(),o(18,"p"),a(19,"K-means works by identifying k centroids (center points) and iteratively refining their positions to minimize the "),o(20,"strong"),a(21,"Within-Cluster Sum of Squares (WCSS)"),s(),a(22,", also called "),o(23,"strong"),a(24,"inertia"),s(),a(25,":"),s(),o(26,"div",61),a(27," WCSS = \u03A3"),o(28,"sub"),a(29,"i=1"),s(),o(30,"sup"),a(31,"k"),s(),a(32," \u03A3"),o(33,"sub"),a(34,"x\u2208C"),o(35,"sub"),a(36,"i"),s()(),a(37," ||x - \u03BC"),o(38,"sub"),a(39,"i"),s(),a(40,"||"),o(41,"sup"),a(42,"2"),s()(),o(43,"p"),a(44,"where k is the number of clusters, C"),o(45,"sub"),a(46,"i"),s(),a(47," is the set of points in the i-th cluster, x is a data point in C"),o(48,"sub"),a(49,"i"),s(),a(50,", and \u03BC"),o(51,"sub"),a(52,"i"),s(),a(53," is the centroid of the i-th cluster."),s()(),o(54,"div",60)(55,"h3"),a(56,"Algorithm Steps"),s(),o(57,"ol")(58,"li")(59,"strong"),a(60,"Choose k and Initialize Centroids:"),s(),o(61,"ul")(62,"li"),a(63,"Specify the number of clusters, k."),s(),o(64,"li"),a(65,"Initialize the positions of the k centroids (random or k-means++ initialization)."),s()()(),o(66,"li")(67,"strong"),a(68,"Assignment Step:"),s(),o(69,"ul")(70,"li"),a(71,"For each data point, calculate its distance to each centroid."),s(),o(72,"li"),a(73,"Assign the point to the cluster with the nearest centroid."),s()()(),o(74,"li")(75,"strong"),a(76,"Update Step:"),s(),o(77,"ul")(78,"li"),a(79,"Recalculate the position of each centroid as the mean of all points assigned to its cluster."),s()()(),o(80,"li")(81,"strong"),a(82,"Iteration and Convergence:"),s(),o(83,"ul")(84,"li"),a(85,"Repeat the Assignment and Update steps until centroids stabilize or maximum iterations are reached."),s()()()()(),o(86,"div",60)(87,"h3"),a(88,"Limitations"),s(),o(89,"ul")(90,"li"),a(91,"Requires specifying k beforehand (can use Elbow Method to help determine)."),s(),o(92,"li"),a(93,"Sensitive to initial centroid placement (k-means++ initialization helps)."),s(),o(94,"li"),a(95,"Assumes clusters are spherical, equally sized, and have similar densities."),s(),o(96,"li"),a(97,"Sensitive to outliers, which can pull centroids away from true cluster centers."),s()()(),o(98,"div",60)(99,"h3"),a(100,"Applications"),s(),o(101,"p"),a(102,"K-means is widely used for customer segmentation, anomaly detection, image compression, feature engineering, document clustering, and pattern recognition in various fields."),s()(),o(103,"div",60)(104,"h3"),a(105,"Research"),s(),o(106,"p"),a(107,`The k-means algorithm was first proposed by Stuart Lloyd in 1957 as a technique for pulse-code modulation, though it wasn't published until 1982. The term "k-means" was first used in MacQueen's 1967 paper "Some Methods for Classification and Analysis of Multivariate Observations".`),s()()())}var ut=class C{visualizationContainer;elbowChartRef;canvas3dRef;k=3;maxK=10;iterations=0;maxIterations=50;wcss=0;converged=!1;animationSpeed=1e3;isPlaying=!1;currentStep="initialize";showElbowMethod=!1;show3D=!1;initMethod="kmeansplusplus";helpSectionOpen=!1;animationInProgress=!1;selectedDatasetIndex=0;datasets=[];points=[];centroids=[];elbowData=[];svg;width=0;height=0;xScale;yScale;scene;camera;renderer;controls;pointMeshes=[];centroidMeshes=[];lineMeshes=[];animationTimer=null;renderTimer=null;COLORS={primary:"#00c9ff",primaryLight:"#6edfff",primaryDark:"#0099cc",background:"#0c1428",cardBackground:"#162a4a",elementBackground:"#1e3a66",hoverBackground:"#2a4980",textPrimary:"#e1e7f5",textSecondary:"#8a9ab0",textEmphasis:"#ffffff",success:"#24b47e",warning:"#ff9d45",error:"#ff6b6b",info:"#64b5f6",clusterColors:["#00c9ff","#7c4dff","#ff9d45","#24b47e","#ff6b6b","#4285f4","#f9a825","#9c27b0","#e91e63","#009688"]};STEP_EXPLANATIONS={initialize:"Initialization: Select initial positions for K centroids. Using k-means++ initialization helps spread the starting centroids for better convergence.",assign:"Assignment Step: Each data point is assigned to the nearest centroid based on Euclidean distance.",update:"Update Step: Each centroid is moved to the mean position of all points assigned to its cluster.",complete:"Convergence: The algorithm has converged when centroids no longer move significantly or max iterations are reached."};constructor(){}ngOnInit(){this.initializeDatasets(),this.resetSimulation()}ngAfterViewInit(){setTimeout(()=>{this.visualizationContainer?.nativeElement&&this.initializeVisualization(),this.elbowChartRef?.nativeElement&&this.initializeElbowChart(),this.canvas3dRef?.nativeElement&&this.initialize3DVisualization(),this.generateDataPoints(),this.resetSimulation()},100)}ngOnDestroy(){this.stopAnimation(),this.renderTimer!==null&&(cancelAnimationFrame(this.renderTimer),this.renderTimer=null),this.renderer&&this.renderer.dispose(),this.pointMeshes.forEach(t=>{t.geometry&&t.geometry.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach(n=>n.dispose()):t.material.dispose())}),this.centroidMeshes.forEach(t=>{t.geometry&&t.geometry.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach(n=>n.dispose()):t.material.dispose())}),this.lineMeshes.forEach(t=>{t.geometry&&t.geometry.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach(n=>n.dispose()):t.material.dispose())})}initializeDatasets(){this.datasets=[{name:"Well-separated clusters",description:"Distinct, spherical clusters that are ideal for K-means",points:[]},{name:"Overlapping clusters",description:"Clusters with some overlap, challenging but manageable for K-means",points:[]},{name:"Uneven clusters",description:"Clusters of different sizes and densities - a challenge for K-means",points:[]},{name:"Non-spherical clusters",description:"Elongated or irregular shapes that violate K-means assumptions",points:[]}]}initializeVisualization(){if(!this.visualizationContainer)return;let t=this.visualizationContainer.nativeElement;this.width=t.clientWidth||600,this.height=t.clientHeight||500,_(t).select("svg").remove(),this.svg=_(t).append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox",`0 0 ${this.width} ${this.height}`).style("background-color",this.COLORS.cardBackground),this.xScale=R().domain([0,100]).range([50,this.width-50]),this.yScale=R().domain([0,100]).range([this.height-50,50]);let n=B(this.xScale),e=Y(this.yScale);this.svg.append("g").attr("transform",`translate(0, ${this.height-50})`).attr("color",this.COLORS.textSecondary).call(n),this.svg.append("g").attr("transform","translate(50, 0)").attr("color",this.COLORS.textSecondary).call(e)}initializeElbowChart(){if(!this.elbowChartRef?.nativeElement)return;let t=this.elbowChartRef.nativeElement,n=t.clientWidth||600,e=t.clientHeight||350;_(t).select("svg").remove();let i=_(t).append("svg").attr("width",n).attr("height",e).attr("viewBox",`0 0 ${n} ${e}`).style("background-color",this.COLORS.cardBackground);i.append("text").attr("x",n/2).attr("y",30).attr("text-anchor","middle").attr("fill",this.COLORS.textEmphasis).text("Elbow Method: WCSS vs. K"),i.append("g").attr("class","x-axis").attr("transform",`translate(0, ${e-50})`).attr("color",this.COLORS.textSecondary),i.append("g").attr("class","y-axis").attr("transform","translate(50, 0)").attr("color",this.COLORS.textSecondary),i.append("text").attr("x",n/2).attr("y",e-10).attr("text-anchor","middle").attr("fill",this.COLORS.textPrimary).text("Number of Clusters (k)"),i.append("text").attr("transform","rotate(-90)").attr("x",-e/2).attr("y",15).attr("text-anchor","middle").attr("fill",this.COLORS.textPrimary).text("WCSS (Within-Cluster Sum of Squares)")}initialize3DVisualization(){if(!this.canvas3dRef?.nativeElement){console.error("3D canvas reference not available");return}try{let t=this.canvas3dRef.nativeElement,n=t.parentElement;if(!n){console.error("Canvas parent element not found");return}let e=n.clientWidth||600,i=n.clientHeight||500;console.log("Initializing 3D visualization with dimensions:",e,i),this.renderer&&(this.renderer.dispose(),this.pointMeshes.forEach(l=>{l.geometry&&l.geometry.dispose(),l.material&&(Array.isArray(l.material)?l.material.forEach(r=>r.dispose()):l.material.dispose())}),this.centroidMeshes.forEach(l=>{l.geometry&&l.geometry.dispose(),l.material&&(Array.isArray(l.material)?l.material.forEach(r=>r.dispose()):l.material.dispose())}),this.lineMeshes.forEach(l=>{l.geometry&&l.geometry.dispose(),l.material&&(Array.isArray(l.material)?l.material.forEach(r=>r.dispose()):l.material.dispose())})),this.scene=new rt,this.scene.background=new it(this.COLORS.cardBackground),this.camera=new st(75,e/i,.1,1e3),this.camera.position.set(5,5,10),this.camera.lookAt(0,0,0),this.renderer=new mt({canvas:t,antialias:!0,alpha:!0}),this.renderer.setSize(e,i),this.renderer.setPixelRatio(window.devicePixelRatio),this.controls=new gt(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.enableZoom=!0,this.controls.enablePan=!0;let c=new ht(16777215,.5);this.scene.add(c);let h=new dt(16777215,1);h.position.set(1,1,1),this.scene.add(h);let p=new j(10,10,8947848,4473924);this.scene.add(p);let g=new pt(5);this.scene.add(g);let d=new j(10,10,8947848,4473924);d.rotation.x=Math.PI/2,this.scene.add(d),this.renderTimer!==null&&cancelAnimationFrame(this.renderTimer),this.animate3D(),console.log("3D visualization initialized successfully")}catch(t){console.error("Error initializing 3D visualization:",t)}}generateDataPoints(){this.generateWellSeparatedClusters(),this.generateOverlappingClusters(),this.generateUnevenClusters(),this.generateNonSphericalClusters(),this.points=[...this.datasets[this.selectedDatasetIndex].points]}generateWellSeparatedClusters(){let t=[],n=0;[{x:25,y:25},{x:75,y:25},{x:50,y:75}].forEach((i,c)=>{for(let h=0;h<50;h++){let p=Math.random()*Math.PI*2,g=Math.random()*10;t.push({id:n++,x:i.x+Math.cos(p)*g,y:i.y+Math.sin(p)*g,cluster:-1})}}),this.datasets[0].points=t}generateOverlappingClusters(){let t=[],n=0;[{x:40,y:40},{x:60,y:60},{x:30,y:70}].forEach((i,c)=>{for(let h=0;h<50;h++){let p=Math.random()*Math.PI*2,g=Math.random()*15;t.push({id:n++,x:i.x+Math.cos(p)*g,y:i.y+Math.sin(p)*g,cluster:-1})}}),this.datasets[1].points=t}generateUnevenClusters(){let t=[],n=0;[{center:{x:30,y:30},count:100,radius:15},{center:{x:70,y:40},count:25,radius:10},{center:{x:50,y:70},count:50,radius:5}].forEach(i=>{for(let c=0;c<i.count;c++){let h=Math.random()*Math.PI*2,p=Math.random()*i.radius;t.push({id:n++,x:i.center.x+Math.cos(h)*p,y:i.center.y+Math.sin(h)*p,cluster:-1})}}),this.datasets[2].points=t}generateNonSphericalClusters(){let t=[],n=0;for(let e=0;e<75;e++){let i=Math.random()*Math.PI,c=25+Math.random()*5;t.push({id:n++,x:50+Math.cos(i)*c,y:50+Math.sin(i)*c,cluster:-1})}for(let e=0;e<75;e++)t.push({id:n++,x:20+Math.random()*60,y:20+Math.random()*10,cluster:-1});this.datasets[3].points=t}initializeCentroids(){this.centroids=[],this.initMethod==="random"?this.initializeRandomCentroids():this.initializeKMeansPlusPlusCentroids(),this.updateVisualization(),this.update3DVisualization()}initializeRandomCentroids(){if(this.k<=this.points.length/2){let t=[...this.points];for(let n=0;n<this.k&&t.length>0;n++){let e=Math.floor(Math.random()*t.length),i=t[e];this.centroids.push({x:i.x,y:i.y}),t.splice(e,1)}}else{let t=100,n=0,e=100,i=0;this.points.forEach(p=>{t=Math.min(t,p.x),n=Math.max(n,p.x),e=Math.min(e,p.y),i=Math.max(i,p.y)});let c=(n-t)*.1,h=(i-e)*.1;t=Math.max(0,t-c),n=Math.min(100,n+c),e=Math.max(0,e-h),i=Math.min(100,i+h);for(let p=0;p<this.k;p++)this.centroids.push({x:t+Math.random()*(n-t),y:e+Math.random()*(i-e)})}for(;this.centroids.length<this.k;)this.centroids.push({x:Math.random()*100,y:Math.random()*100})}initializeKMeansPlusPlusCentroids(){let t=Math.min(this.k,this.points.length),n=Math.floor(Math.random()*this.points.length);this.centroids.push({x:this.points[n].x,y:this.points[n].y});for(let e=1;e<t;e++){let i=[],c=0;if(this.points.forEach(l=>{let r=Number.MAX_VALUE;this.centroids.forEach(f=>{let u=this.calculateSquaredDistance(l,f);r=Math.min(r,u)}),i.push(r),c+=r}),c<.001){for(let l=e;l<t;l++){let r=Math.floor(Math.random()*this.points.length);this.centroids.push({x:this.points[r].x+(Math.random()-.5)*5,y:this.points[r].y+(Math.random()-.5)*5})}return}let h=i.map(l=>l/c),p=Math.random(),g=0,d=-1;for(let l=0;l<h.length;l++)if(g+=h[l],p<=g){d=l;break}d===-1&&(d=h.length-1),this.centroids.push({x:this.points[d].x,y:this.points[d].y})}if(this.k>this.points.length)for(let e=this.points.length;e<this.k;e++){let i=this.points[Math.floor(Math.random()*this.points.length)];this.centroids.push({x:i.x+(Math.random()-.5)*20,y:i.y+(Math.random()-.5)*20})}}assignPointsToClusters(){this.centroids.forEach(t=>{t.oldX=t.x,t.oldY=t.y}),this.points.forEach(t=>{let n=Number.MAX_VALUE,e=-1;this.centroids.forEach((i,c)=>{let h=this.calculateSquaredDistance(t,i);h<n&&(n=h,e=c)}),t.cluster=e,t.distance=Math.sqrt(n)}),this.calculateWCSS()}updateCentroids(){let t=!1,n=[];for(let e=0;e<this.k;e++){let i=this.points.filter(c=>c.cluster===e);if(i.length>0){let c=i.reduce((r,f)=>r+f.x,0),h=i.reduce((r,f)=>r+f.y,0),p=c/i.length,g=h/i.length,d=this.centroids[e].x,l=this.centroids[e].y;(Math.abs(p-d)>.001||Math.abs(g-l)>.001)&&(t=!0),n.push({x:p,y:g,oldX:d,oldY:l})}else{let c=-1,h=null;for(let p of this.points){let g=Number.MAX_VALUE;for(let d of n){let l=this.calculateSquaredDistance(p,d);g=Math.min(g,l)}g>c&&(c=g,h=p)}h?(n.push({x:h.x,y:h.y,oldX:this.centroids[e].x,oldY:this.centroids[e].y}),t=!0):n.push(T({},this.centroids[e]))}}this.centroids=n,this.converged=!t}calculateWCSS(){let t=0;this.points.forEach(n=>{n.cluster>=0&&n.distance!==void 0&&(t+=n.distance*n.distance)}),this.wcss=t}calculateSquaredDistance(t,n){let e=t.x-n.x,i=t.y-n.y;return e*e+i*i}updateVisualization(){this.svg&&(this.svg.selectAll(".data-point").remove(),this.svg.selectAll(".centroid").remove(),this.svg.selectAll(".assignment-line").remove(),this.currentStep==="assign"&&this.svg.selectAll(".assignment-line").data(this.points).enter().append("line").attr("class","assignment-line").attr("x1",t=>this.xScale(t.x)).attr("y1",t=>this.yScale(t.y)).attr("x2",t=>{let n=t.cluster>=0&&t.cluster<this.centroids.length?this.centroids[t.cluster]:null;return n?this.xScale(n.x):this.xScale(t.x)}).attr("y2",t=>{let n=t.cluster>=0&&t.cluster<this.centroids.length?this.centroids[t.cluster]:null;return n?this.yScale(n.y):this.yScale(t.y)}).attr("stroke",t=>t.cluster>=0?this.COLORS.clusterColors[t.cluster%this.COLORS.clusterColors.length]:"#ffffff").attr("stroke-width",.5).attr("stroke-opacity",.3),this.svg.selectAll(".data-point").data(this.points).enter().append("circle").attr("class","data-point").attr("cx",t=>this.xScale(t.x)).attr("cy",t=>this.yScale(t.y)).attr("r",5).attr("fill",t=>t.cluster>=0?this.COLORS.clusterColors[t.cluster%this.COLORS.clusterColors.length]:this.COLORS.textSecondary).attr("stroke",this.COLORS.textPrimary).attr("stroke-width",1),this.svg.selectAll(".centroid").data(this.centroids).enter().append("circle").attr("class","centroid").attr("cx",t=>this.xScale(t.x)).attr("cy",t=>this.yScale(t.y)).attr("r",8).attr("fill",(t,n)=>this.COLORS.clusterColors[n%this.COLORS.clusterColors.length]).attr("stroke",this.COLORS.textEmphasis).attr("stroke-width",2).attr("stroke-dasharray","3,3"))}updateElbowChart(){if(!this.elbowChartRef?.nativeElement||!this.elbowData.length)return;let t=this.elbowChartRef.nativeElement,n=t.clientWidth||600,e=t.clientHeight||350;console.log("Updating elbow chart with data:",this.elbowData);let i=R().domain([1,Math.max(this.maxK,X(this.elbowData,r=>r.k)||10)]).range([50,n-50]),c=X(this.elbowData,r=>r.wcss)||100,h=R().domain([0,c*1.1]).range([e-50,50]);_(t).select("svg").remove();let p=_(t).append("svg").attr("width",n).attr("height",e).attr("viewBox",`0 0 ${n} ${e}`).style("background-color",this.COLORS.cardBackground);p.append("text").attr("x",n/2).attr("y",30).attr("text-anchor","middle").attr("fill",this.COLORS.textEmphasis).text("Elbow Method: WCSS vs. K");let g=B(i).ticks(Math.min(this.elbowData.length,10)).tickFormat(tt("d")),d=Y(h);p.append("g").attr("class","x-axis").attr("transform",`translate(0, ${e-50})`).attr("color",this.COLORS.textSecondary).call(g),p.append("g").attr("class","y-axis").attr("transform","translate(50, 0)").attr("color",this.COLORS.textSecondary).call(d),p.append("text").attr("x",n/2).attr("y",e-10).attr("text-anchor","middle").attr("fill",this.COLORS.textPrimary).text("Number of Clusters (k)"),p.append("text").attr("transform","rotate(-90)").attr("x",-e/2).attr("y",15).attr("text-anchor","middle").attr("fill",this.COLORS.textPrimary).text("WCSS (Within-Cluster Sum of Squares)");let l=et().x(r=>i(r.k)).y(r=>h(r.wcss)).curve(nt);if(p.append("path").datum(this.elbowData).attr("class","elbow-line").attr("fill","none").attr("stroke",this.COLORS.primary).attr("stroke-width",2).attr("d",l),p.selectAll(".elbow-point").data(this.elbowData).enter().append("circle").attr("class","elbow-point").attr("cx",r=>i(r.k)).attr("cy",r=>h(r.wcss)).attr("r",r=>r.k===this.k?8:5).attr("fill",r=>r.k===this.k?this.COLORS.warning:this.COLORS.primary).attr("stroke",this.COLORS.textEmphasis).attr("stroke-width",r=>r.k===this.k?2:1),this.elbowData.length>=3){let r=[];for(let u=1;u<this.elbowData.length-1;u++){let x=this.elbowData[u-1],b=this.elbowData[u],S=this.elbowData[u+1],k=(x.wcss-b.wcss)/(b.k-x.k),D=(b.wcss-S.wcss)/(S.k-b.k),ft=Math.abs(D-k);r.push({k:b.k,derivative:ft})}r.sort((u,x)=>x.derivative-u.derivative);let f=r[0]?.k;if(f){let u=this.elbowData.find(x=>x.k===f);u&&(p.append("circle").attr("cx",i(u.k)).attr("cy",h(u.wcss)).attr("r",12).attr("fill","none").attr("stroke",this.COLORS.success).attr("stroke-width",2).attr("stroke-dasharray","4,4"),p.append("text").attr("x",i(u.k)).attr("y",h(u.wcss)-15).attr("text-anchor","middle").attr("fill",this.COLORS.success).text("Suggested K: "+f))}}p.selectAll(".elbow-label").data(this.elbowData).enter().append("text").attr("class","elbow-label").attr("x",r=>i(r.k)).attr("y",r=>h(r.wcss)-10).attr("text-anchor","middle").attr("fill",this.COLORS.textPrimary).text(r=>r.wcss.toFixed(0))}update3DVisualization(){if(!this.scene||!this.show3D)return;console.log("Updating 3D visualization with points:",this.points.length),this.pointMeshes.forEach(d=>this.scene?.remove(d)),this.centroidMeshes.forEach(d=>this.scene?.remove(d)),this.lineMeshes.forEach(d=>this.scene?.remove(d)),this.pointMeshes=[],this.centroidMeshes=[],this.lineMeshes=[];let t=10/100,n=10/100,e=10/100,i=50,c=50;this.points[0]?.hasOwnProperty("zPos")||(console.log("Generating 3D positions for points"),this.points.forEach((d,l)=>{let r=Math.sin(d.x/20)*3,f=Math.cos(d.y/20)*3,u=(Math.sin(d.id*5.731)+Math.cos(d.id*2.457))*3,x=l%5*.5,b=r+f+u+x;Object.defineProperty(d,"zPos",{value:b,writable:!1,configurable:!0})}));let h=new N(.3,24,24),p=[];this.centroids.forEach((d,l)=>{try{let r=0,f=0;this.points.forEach(b=>{b.cluster===l&&(r+=b.zPos??0,f++)}),f===0?r=(Math.random()-.5)*10:r/=f;let u=new q({color:this.COLORS.clusterColors[l%this.COLORS.clusterColors.length],emissive:this.COLORS.clusterColors[l%this.COLORS.clusterColors.length],emissiveIntensity:.5,metalness:.8,roughness:.2}),x=new F(h,u);x.position.set((d.x-i)*t,(d.y-c)*n,r*e),p[l]=x.position.clone(),this.scene?.add(x),this.centroidMeshes.push(x)}catch(r){console.error("Error creating 3D centroid:",r)}});let g=new N(.15,16,16);this.points.forEach((d,l)=>{try{let r=new q({color:d.cluster>=0?this.COLORS.clusterColors[d.cluster%this.COLORS.clusterColors.length]:this.COLORS.textSecondary,emissive:d.cluster>=0?this.COLORS.clusterColors[d.cluster%this.COLORS.clusterColors.length]:this.COLORS.textSecondary,emissiveIntensity:.3}),f=new F(g,r);if(f.position.set((d.x-i)*t,(d.y-c)*n,(d.zPos??0)*e),this.scene?.add(f),this.pointMeshes.push(f),this.currentStep==="assign"&&d.cluster>=0&&d.cluster<this.centroids.length){let u=p[d.cluster];if(u){let x=new ot;x.setAttribute("position",new at([f.position.x,f.position.y,f.position.z,u.x,u.y,u.z],3));let b=new lt({color:this.COLORS.clusterColors[d.cluster%this.COLORS.clusterColors.length],transparent:!0,opacity:.3,linewidth:1}),S=new ct(x,b);this.scene?.add(S),this.lineMeshes.push(S)}}}catch(r){console.error("Error creating 3D point:",r)}}),this.camera&&(this.camera.position.set(8,8,8),this.camera.lookAt(0,0,0)),this.controls&&this.controls.update(),console.log("3D visualization updated with points:",this.pointMeshes.length,"centroids:",this.centroidMeshes.length)}animate3D(){try{this.renderTimer=requestAnimationFrame(()=>this.animate3D()),this.controls&&this.controls.update(),this.renderer&&this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)}catch(t){console.error("Error in 3D animation loop:",t),this.renderTimer!==null&&(cancelAnimationFrame(this.renderTimer),this.renderTimer=null)}}resetSimulation(){this.stopAnimation(),this.iterations=0,this.wcss=0,this.converged=!1,this.currentStep="initialize",this.points.forEach(t=>{t.cluster=-1,t.distance=void 0}),this.centroids=[],this.svg&&this.updateVisualization(),this.scene&&this.update3DVisualization()}nextStep(){if(!this.animationInProgress){switch(this.animationInProgress=!0,this.currentStep){case"initialize":this.initializeCentroids(),this.currentStep="assign";break;case"assign":this.assignPointsToClusters(),this.updateVisualization(),this.show3D&&this.update3DVisualization(),this.currentStep="update";break;case"update":if(this.updateCentroids(),this.iterations++,this.updateVisualization(),this.show3D&&(this.iterations%5===0&&this.points.forEach(t=>{t&&delete t.zPos}),this.update3DVisualization()),this.converged||this.iterations>=this.maxIterations){this.currentStep="complete";let t=this.elbowData.find(n=>n.k===this.k);t?t.wcss=this.wcss:(this.elbowData.push({k:this.k,wcss:this.wcss}),this.elbowData.sort((n,e)=>n.k-e.k)),this.updateElbowChart()}else this.currentStep="assign";break;case"complete":this.resetSimulation();break}setTimeout(()=>{this.animationInProgress=!1},500)}}startAnimation(){this.isPlaying||(this.isPlaying=!0,this.runAnimationStep())}stopAnimation(){this.isPlaying=!1,this.animationTimer!==null&&(clearTimeout(this.animationTimer),this.animationTimer=null)}runAnimationStep(){this.isPlaying&&(this.nextStep(),this.animationTimer=window.setTimeout(()=>{this.isPlaying&&this.runAnimationStep()},this.animationSpeed))}togglePlayPause(){this.isPlaying?this.stopAnimation():this.startAnimation()}changeK(t){let n=typeof t=="string"?parseInt(t,10):t,e=Math.max(1,Math.min(n||2,Math.min(10,Math.floor(this.points.length/5))));this.k!==e&&(console.log(`Changing k from ${this.k} to ${e}`),this.k=e,this.show3D&&this.points.forEach(i=>{i&&delete i.zPos}),this.resetSimulation())}changeDataset(t){let n=typeof t=="string"?parseInt(t,10):t;n>=0&&n<this.datasets.length&&(this.selectedDatasetIndex=n,this.points=[...this.datasets[n].points],this.points.forEach(e=>{e&&delete e.zPos}),this.resetSimulation())}changeInitMethod(t){this.initMethod=t,this.show3D&&this.points.forEach(n=>{n&&delete n.zPos}),this.resetSimulation()}toggleElbowMethod(){this.showElbowMethod=!this.showElbowMethod,this.showElbowMethod&&(this.elbowData.length<2&&this.generateElbowData(),setTimeout(()=>{this.updateElbowChart()},100))}generateElbowData(){let t=this.k,n=[...this.centroids],e=this.points.map(i=>T({},i));console.log("Generating elbow data"),this.elbowData=[];for(let i=1;i<=Math.min(9,Math.floor(this.points.length/10));i++){this.k=i,this.centroids=[],this.points.forEach((p,g)=>{p.cluster=-1,p.distance=void 0}),this.initMethod==="random"?this.initializeRandomCentroids():this.initializeKMeansPlusPlusCentroids();let c=!1,h=0;for(;!c&&h<10;){this.assignPointsToClusters(),h++;let p=!1,g=[];for(let d=0;d<this.k;d++){let l=this.points.filter(r=>r.cluster===d);if(l.length>0){let r=l.reduce((k,D)=>k+D.x,0),f=l.reduce((k,D)=>k+D.y,0),u=r/l.length,x=f/l.length,b=this.centroids[d].x,S=this.centroids[d].y;(Math.abs(u-b)>.001||Math.abs(x-S)>.001)&&(p=!0),g.push({x:u,y:x,oldX:b,oldY:S})}else g.push(T({},this.centroids[d]))}this.centroids=g,c=!p}this.calculateWCSS(),this.elbowData.push({k:i,wcss:this.wcss})}this.k=t,this.centroids=n,this.points.forEach((i,c)=>{Object.assign(i,e[c])}),this.elbowData.sort((i,c)=>i.k-c.k),console.log("Elbow data generated:",this.elbowData)}toggle3DView(){let t=this.show3D;this.show3D=!this.show3D,setTimeout(()=>{this.show3D&&(console.log("Initializing 3D view"),this.points.forEach(n=>{n&&delete n.zPos}),this.initialize3DVisualization(),this.update3DVisualization())},100)}toggleHelpSection(){this.helpSectionOpen=!this.helpSectionOpen}changeAnimationSpeed(t){this.animationSpeed=t}static \u0275fac=function(n){return new(n||C)};static \u0275cmp=G({type:C,selectors:[["app-kmeans-simulation"]],viewQuery:function(n,e){if(n&1&&(A(xt,5),A(bt,5),A(Ct,5)),n&2){let i;L(i=V())&&(e.visualizationContainer=i.first),L(i=V())&&(e.elbowChartRef=i.first),L(i=V())&&(e.canvas3dRef=i.first)}},decls:103,vars:36,consts:[["visualizationContainer",""],["canvas3d",""],["speedInput",""],["kInput",""],["datasetSelect",""],["elbowChart",""],[1,"main-container"],[1,"header"],[1,"description"],[1,"content-container"],[1,"visualization-panel"],[1,"visualization-container"],[1,"canvas-3d"],["class","view-instructions",4,"ngIf"],[1,"controls-panel"],[1,"control-section"],[1,"control-header"],[1,"step-controls"],[1,"animation-controls"],[1,"btn",3,"click","disabled"],[1,"animation-speed"],[1,"speed-selector"],["type","range","min","100","max","2000","step","100",3,"input","value"],[1,"parameter-controls"],[1,"parameter"],["for","k-value"],[1,"parameter-input"],["type","range","id","k-value","min","2",3,"change","max","value"],[1,"parameter-value"],[1,"init-method-selector"],[1,"btn-toggle",3,"click"],[1,"dataset-selector"],[3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"dataset-description"],[1,"view-selector"],[1,"current-status"],[1,"status-item"],[1,"status-label"],[1,"status-value"],[1,"status-metrics"],[1,"metric"],[1,"metric-label"],[1,"metric-value"],[1,"elbow-toggle"],[1,"btn",3,"click"],["class","elbow-method-container",4,"ngIf"],[1,"explanation-section"],[1,"explanation-header"],[1,"toggle-help-btn",3,"click"],["class","explanation-content",4,"ngIf"],[1,"view-instructions"],[3,"value","selected"],[1,"elbow-method-container"],[1,"elbow-chart"],[1,"elbow-explanation"],["class","elbow-loading",4,"ngIf"],[1,"elbow-loading"],[1,"spinner"],[1,"explanation-content"],[1,"explanation-block"],[1,"formula"]],template:function(n,e){if(n&1){let i=U();o(0,"div",6)(1,"div",7)(2,"h1"),a(3,"K-means Clustering Simulation"),s(),o(4,"p",8),a(5,"An interactive visualization of the K-means algorithm and its iterative process"),s()(),o(6,"div",9)(7,"div",10),I(8,"div",11,0)(10,"canvas",12,1),y(12,vt,3,0,"div",13),s(),o(13,"div",14)(14,"div",15)(15,"div",16)(16,"h2"),a(17,"Algorithm Controls"),s()(),o(18,"div",17)(19,"div",18)(20,"button",19),w("click",function(){return v(i),M(e.resetSimulation())}),a(21," \u21BA Reset "),s(),o(22,"button",19),w("click",function(){return v(i),M(e.togglePlayPause())}),a(23),s(),o(24,"button",19),w("click",function(){return v(i),M(e.nextStep())}),a(25," \u23ED Step "),s()(),o(26,"div",20)(27,"label"),a(28,"Animation Speed:"),s(),o(29,"div",21)(30,"span"),a(31,"Slow"),s(),o(32,"input",22,2),w("input",function(){v(i);let h=H(33);return M(e.changeAnimationSpeed(2100-+h.value))}),s(),o(34,"span"),a(35,"Fast"),s()()()(),o(36,"div",23)(37,"div",24)(38,"label",25),a(39,"Number of Clusters (k):"),s(),o(40,"div",26)(41,"input",27,3),w("change",function(){v(i);let h=H(42);return M(e.changeK(h.value))}),s(),o(43,"span",28),a(44),s()()(),o(45,"div",24)(46,"label"),a(47,"Initialization Method:"),s(),o(48,"div",29)(49,"button",30),w("click",function(){return v(i),M(e.changeInitMethod("kmeansplusplus"))}),a(50,"K-means++"),s(),o(51,"button",30),w("click",function(){return v(i),M(e.changeInitMethod("random"))}),a(52,"Random"),s()()(),o(53,"div",24)(54,"label"),a(55,"Dataset:"),s(),o(56,"div",31)(57,"select",32,4),w("change",function(){v(i);let h=H(58);return M(e.changeDataset(h.value))}),y(59,Mt,2,3,"option",33),s(),o(60,"div",34),a(61),s()()(),o(62,"div",24)(63,"label"),a(64,"Visualization:"),s(),o(65,"div",35)(66,"button",30),w("click",function(){return v(i),M(e.show3D=!1)}),a(67,"2D View"),s(),o(68,"button",30),w("click",function(){return v(i),M(e.toggle3DView())}),a(69,"3D View"),s()()()()(),o(70,"div",36)(71,"div",37)(72,"span",38),a(73,"Current Step:"),s(),o(74,"span",39),a(75),s()(),o(76,"div",40)(77,"div",41)(78,"span",42),a(79,"Iterations:"),s(),o(80,"span",43),a(81),s()(),o(82,"div",41)(83,"span",42),a(84,"WCSS:"),s(),o(85,"span",43),a(86),s()(),o(87,"div",41)(88,"span",42),a(89,"Status:"),s(),o(90,"span",43),a(91),s()()()(),o(92,"div",44)(93,"button",45),w("click",function(){return v(i),M(e.toggleElbowMethod())}),a(94),s()()()(),y(95,Ot,9,1,"div",46),o(96,"div",47)(97,"div",48)(98,"h2"),a(99,"K-means Clustering Algorithm"),s(),o(100,"button",49),w("click",function(){return v(i),M(e.toggleHelpSection())}),a(101),s()(),y(102,St,108,0,"div",50),s()()}n&2&&(m(7),P("show-3d",e.show3D),m(),K("display",e.show3D?"none":"block"),m(2),K("display",e.show3D?"block":"none"),m(2),O("ngIf",e.show3D),m(8),O("disabled",e.animationInProgress),m(2),O("disabled",e.animationInProgress),m(),$(" ",e.isPlaying?"\u23F8":"\u25B6"," ",e.isPlaying?"Pause":"Play"," "),m(),O("disabled",e.isPlaying||e.animationInProgress),m(8),O("value",2100-e.animationSpeed),m(9),O("max",e.maxK)("value",e.k),m(3),z(e.k),m(5),P("active",e.initMethod==="kmeansplusplus"),m(2),P("active",e.initMethod==="random"),m(8),O("ngForOf",e.datasets),m(2),E(" ",e.datasets[e.selectedDatasetIndex]==null?null:e.datasets[e.selectedDatasetIndex].description," "),m(5),P("active",!e.show3D),m(2),P("active",e.show3D),m(7),z(e.STEP_EXPLANATIONS[e.currentStep]),m(6),z(e.iterations),m(5),z(e.wcss.toFixed(2)),m(4),P("converged",e.converged&&e.currentStep==="complete"),m(),E(" ",e.converged&&e.currentStep==="complete"?"Converged":e.iterations>=e.maxIterations&&e.currentStep==="complete"?"Max Iterations":"Running"," "),m(3),E(" ",e.showElbowMethod?"Hide":"Show"," Elbow Method "),m(),O("ngIf",e.showElbowMethod),m(6),E(" ",e.helpSectionOpen?"Hide Details":"Show Details"," "),m(),O("ngIf",e.helpSectionOpen))},dependencies:[J,Q,Z],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;font-family:Inter,Roboto,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;color:#e1e7f5;background-color:#0c1428;min-height:100vh;width:100%;overflow-x:hidden}.main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:1400px;margin:0 auto;padding:16px;gap:24px;width:100%}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:8px;background:linear-gradient(135deg,#00c9ff,#7c4dff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.header[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1.1rem;color:#8a9ab0;max-width:800px;margin:0 auto}.content-container[_ngcontent-%COMP%]{display:flex;gap:24px;flex-wrap:wrap}@media (max-width: 1200px){.content-container[_ngcontent-%COMP%]{flex-direction:column}}.visualization-panel[_ngcontent-%COMP%]{flex:1;min-width:300px;min-height:500px;background-color:#162a4a;border-radius:12px;box-shadow:0 4px 8px #0000004d;padding:24px;position:relative;overflow:hidden}.visualization-panel.show-3d[_ngcontent-%COMP%]{min-height:600px}.visualization-container[_ngcontent-%COMP%]{width:100%;height:100%;min-height:500px}.canvas-3d[_ngcontent-%COMP%]{width:100%;height:100%;min-height:500px;background-color:#162a4a}.view-instructions[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:0;right:0;text-align:center;background-color:#162a4ab3;padding:8px;border-radius:8px;font-size:.9rem;color:#e1e7f5;pointer-events:none}.controls-panel[_ngcontent-%COMP%]{width:350px;display:flex;flex-direction:column;gap:16px}@media (max-width: 1200px){.controls-panel[_ngcontent-%COMP%]{width:100%}}.control-section[_ngcontent-%COMP%]{background-color:#162a4a;border-radius:12px;box-shadow:0 4px 8px #0000004d;padding:24px;display:flex;flex-direction:column;gap:16px}.control-header[_ngcontent-%COMP%]{margin-bottom:8px}.control-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#fff}.step-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.animation-controls[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:space-between}.animation-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#1e3a66;color:#e1e7f5;border:none;border-radius:8px;padding:8px 16px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:all .2s ease;flex:1}.animation-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2a4980}.animation-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(1px)}.animation-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.animation-speed[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.animation-speed[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;color:#8a9ab0}.animation-speed[_ngcontent-%COMP%]   .speed-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.animation-speed[_ngcontent-%COMP%]   .speed-selector[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem;color:#8a9ab0}.animation-speed[_ngcontent-%COMP%]   .speed-selector[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{flex:1;height:6px;border-radius:5px;background:#1e3a66;outline:none;-webkit-appearance:none}.animation-speed[_ngcontent-%COMP%]   .speed-selector[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:#00c9ff;cursor:pointer}.animation-speed[_ngcontent-%COMP%]   .speed-selector[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:#00c9ff;cursor:pointer;border:none}.parameter-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.parameter[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.parameter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;color:#8a9ab0}.parameter-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.parameter-input[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{flex:1;height:6px;border-radius:5px;background:#1e3a66;outline:none;-webkit-appearance:none}.parameter-input[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:#00c9ff;cursor:pointer}.parameter-input[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:#00c9ff;cursor:pointer;border:none}.parameter-input[_ngcontent-%COMP%]   .parameter-value[_ngcontent-%COMP%]{min-width:30px;text-align:center;font-weight:600;color:#fff}.init-method-selector[_ngcontent-%COMP%], .view-selector[_ngcontent-%COMP%]{display:flex;gap:8px}.init-method-selector[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%], .view-selector[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]{color:#e1e7f5;border:none;border-radius:8px;padding:8px 16px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:all .2s ease;flex:1;background-color:#1e3a66}.init-method-selector[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]:hover:not(:disabled), .view-selector[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2a4980}.init-method-selector[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]:active:not(:disabled), .view-selector[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(1px)}.init-method-selector[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]:disabled, .view-selector[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.init-method-selector[_ngcontent-%COMP%]   .btn-toggle.active[_ngcontent-%COMP%], .view-selector[_ngcontent-%COMP%]   .btn-toggle.active[_ngcontent-%COMP%]{background-color:#09c;color:#fff}.dataset-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.dataset-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#1e3a66;color:#e1e7f5;border:none;border-radius:8px;padding:8px 16px;font-size:1rem;width:100%;outline:none;cursor:pointer}.dataset-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#162a4a}.dataset-selector[_ngcontent-%COMP%]   .dataset-description[_ngcontent-%COMP%]{font-size:.85rem;color:#8a9ab0;font-style:italic}.current-status[_ngcontent-%COMP%]{background-color:#162a4a;border-radius:12px;box-shadow:0 4px 8px #0000004d;padding:24px;display:flex;flex-direction:column;gap:16px}.status-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]{font-size:.9rem;color:#8a9ab0}.status-item[_ngcontent-%COMP%]   .status-value[_ngcontent-%COMP%]{font-size:1rem;color:#e1e7f5;line-height:1.4}.status-metrics[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.metric[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;min-width:80px}.metric[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{font-size:.8rem;color:#8a9ab0}.metric[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#fff}.metric[_ngcontent-%COMP%]   .metric-value.converged[_ngcontent-%COMP%]{color:#24b47e}.elbow-toggle[_ngcontent-%COMP%]{display:flex;justify-content:center}.elbow-toggle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#1e3a66;color:#e1e7f5;border:none;border-radius:8px;padding:8px 16px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:all .2s ease;background:linear-gradient(135deg,#00c9ff,#ae94ff);color:#fff}.elbow-toggle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2a4980}.elbow-toggle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(1px)}.elbow-toggle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.elbow-toggle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{opacity:.9}.elbow-method-container[_ngcontent-%COMP%]{background-color:#162a4a;border-radius:12px;box-shadow:0 4px 8px #0000004d;padding:24px;display:flex;flex-wrap:wrap;gap:24px;margin-top:16px}.elbow-method-container[_ngcontent-%COMP%]   .elbow-chart[_ngcontent-%COMP%]{flex:2;min-width:300px;height:350px}.elbow-method-container[_ngcontent-%COMP%]   .elbow-explanation[_ngcontent-%COMP%]{flex:1;min-width:250px;display:flex;flex-direction:column;justify-content:center}.elbow-method-container[_ngcontent-%COMP%]   .elbow-explanation[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#fff;margin-bottom:8px}.elbow-method-container[_ngcontent-%COMP%]   .elbow-explanation[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5;color:#e1e7f5}.elbow-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:20px}.elbow-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:4px solid rgba(0,201,255,.1);border-top-color:#00c9ff;animation:_ngcontent-%COMP%_spin 1s linear infinite}.elbow-loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px;color:#8a9ab0}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.explanation-section[_ngcontent-%COMP%]{background-color:#162a4a;border-radius:12px;box-shadow:0 4px 8px #0000004d;padding:24px;display:flex;flex-direction:column;gap:16px}.explanation-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.explanation-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#fff}.explanation-header[_ngcontent-%COMP%]   .toggle-help-btn[_ngcontent-%COMP%]{background-color:#1e3a66;color:#e1e7f5;border:none;border-radius:8px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:all .2s ease;background-color:transparent;border:1px solid #1e3a66;padding:8px 12px;font-size:.9rem}.explanation-header[_ngcontent-%COMP%]   .toggle-help-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2a4980}.explanation-header[_ngcontent-%COMP%]   .toggle-help-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(1px)}.explanation-header[_ngcontent-%COMP%]   .toggle-help-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.explanation-header[_ngcontent-%COMP%]   .toggle-help-btn[_ngcontent-%COMP%]:hover{background-color:#1e3a66}.explanation-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;margin-top:8px}.explanation-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.explanation-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#00c9ff}.explanation-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .explanation-block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .explanation-block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;color:#e1e7f5}.explanation-block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .explanation-block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{padding-left:24px}.explanation-block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .explanation-block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.explanation-block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], .explanation-block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff}.explanation-block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .explanation-block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:8px}.explanation-block[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{background-color:#1e3a66;padding:16px;border-radius:8px;text-align:center;font-size:1.1rem;color:#fff;margin:8px 0}@media (max-width: 768px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.content-container[_ngcontent-%COMP%]{flex-direction:column}.controls-panel[_ngcontent-%COMP%]{width:100%}.animation-controls[_ngcontent-%COMP%], .elbow-method-container[_ngcontent-%COMP%]{flex-direction:column}}"]})};export{ut as KMeansSimulationComponent};
